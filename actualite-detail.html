<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Actualité — BOTH EQUIPMNT</title>
<meta name="description" content="Actualité Both Equipmnt — Studio de design sportif pour clubs.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{ box-sizing:border-box; margin:0; padding:0; }
:root{
  --black:#0a0a0a;
  --white:#fafaf8;
  --yellow:#ffd700;
  --yellow-dark:#ffcc00;
  --display:'Oswald',sans-serif;
  --body:'Work Sans',sans-serif;
}
html{ scroll-behavior:smooth; -webkit-font-smoothing:antialiased; }
body{ font-family:var(--body); background:var(--black); color:var(--white); line-height:1.65; }
a{ text-decoration:none; color:inherit; }

nav{
  position:fixed; top:0; left:0; right:0; z-index:100;
  padding:1.2rem 3.5rem; background:rgba(10,10,10,.95);
  backdrop-filter:blur(16px); border-bottom:1px solid rgba(255,255,255,.1);
}
.nav-logo img{ height:55px; }

.article-header{
  min-height:50vh; display:flex; flex-direction:column;
  justify-content:flex-end; position:relative; overflow:hidden;
  padding:8rem 3.5rem 4rem;
}
.article-header::before{
  content:''; position:absolute; inset:0;
  background:linear-gradient(to bottom, rgba(10,10,10,0.4) 0%, rgba(10,10,10,0.95) 100%);
  z-index:1;
}
.header-bg{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; z-index:0;
}
.article-title{
  position:relative; z-index:2; max-width:1200px; margin:0 auto;
  width:100%;
}
.article-title h1{
  font-family:var(--display); font-size:clamp(2.5rem,6vw,5rem);
  font-weight:700; letter-spacing:.06em; text-transform:uppercase;
  margin-bottom:1rem; line-height:1.1;
}
.article-date{
  font-size:.9rem; color:var(--yellow); letter-spacing:.15em;
  text-transform:uppercase; font-weight:600;
}

.article-content{
  max-width:900px; margin:0 auto; padding:4rem 2rem 6rem;
}
.article-content p{
  font-size:1.15rem; line-height:1.9; margin-bottom:1.8rem;
  color:rgba(250,250,248,.9);
}
.article-gallery{
  display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:2rem; margin:3rem 0;
}
.article-gallery img{
  width:100%; aspect-ratio:4/3; object-fit:cover;
  border-radius:8px;
}

.back-btn{
  display:inline-block; margin-bottom:3rem;
  padding:.95rem 2.5rem; background:transparent;
  border:2px solid var(--yellow); color:var(--yellow);
  font-size:.75rem; letter-spacing:.22em; text-transform:uppercase;
  font-weight:600; transition:all .3s ease;
}
.back-btn:hover{
  background:var(--yellow); color:var(--black);
}

.loading{
  text-align:center; padding:8rem 2rem;
  font-size:1.2rem; color:rgba(255,255,255,.5);
}
.spinner{
  width:40px; height:40px; margin:0 auto 1rem;
  border:3px solid rgba(255,255,255,.1);
  border-top-color:var(--yellow);
  border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin{ to{transform:rotate(360deg)} }

footer{
  background:#1a1a1a; color:var(--white); padding:3rem 3.5rem;
  border-top:1px solid #333; text-align:center;
}

@media (max-width:768px){
  .article-header{ padding:6rem 2rem 3rem; }
  .article-content{ padding:3rem 1.5rem 4rem; }
}
</style>
</head>
<body>

<nav>
  <a href="/" class="nav-logo">
    <img src="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400" alt="BOTH EQUIPMNT">
  </a>
</nav>

<div id="article-container">
  <div class="loading">
    <div class="spinner"></div>
    <p>Chargement de l'actualité...</p>
  </div>
</div>

<footer>
  <p>© 2025 Both Equipmnt. Tous droits réservés.</p>
</footer>

<script>
const API = "/.netlify/functions/notion-api";

async function loadArticle() {
  try {
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    
    if (!id) {
      document.getElementById('article-container').innerHTML = `
        <div class="article-content">
          <a href="/" class="back-btn">← Retour à l'accueil</a>
          <p style="color:#ff4444;">Actualité non trouvée.</p>
        </div>
      `;
      return;
    }
    
    const res = await fetch(API + '?action=getNews&id=' + encodeURIComponent(id));
    const data = await res.json();
    
    if (!data.news) {
      document.getElementById('article-container').innerHTML = `
        <div class="article-content">
          <a href="/" class="back-btn">← Retour à l'accueil</a>
          <p style="color:#ff4444;">Actualité non trouvée.</p>
        </div>
      `;
      return;
    }
    
    const article = data.news;
    
    let html = `
      <section class="article-header">
        ${article.image ? `<img src="${article.image}" alt="${article.titre}" class="header-bg">` : ''}
        <div class="article-title">
          <div class="article-date">${article.date}</div>
          <h1>${article.titre}</h1>
        </div>
      </section>
      
      <div class="article-content">
        <a href="/" class="back-btn">← Retour à l'accueil</a>
        
        ${article.texte_court ? `<p>${article.texte_court}</p>` : ''}
        
        ${article.images && article.images.length > 1 ? `
          <div class="article-gallery">
            ${article.images.slice(1).map(img => `<img src="${img}" alt="${article.titre}">`).join('')}
          </div>
        ` : ''}
      </div>
    `;
    
    document.getElementById('article-container').innerHTML = html;
    
    // Mettre à jour le titre de la page
    document.title = `${article.titre} — BOTH EQUIPMNT`;
    
  } catch (e) {
    console.error(e);
    document.getElementById('article-container').innerHTML = `
      <div class="article-content">
        <a href="/" class="back-btn">← Retour à l'accueil</a>
        <p style="color:#ff4444;">Erreur lors du chargement de l'actualité.</p>
      </div>
    `;
  }
}

window.addEventListener('load', loadArticle);
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BOTH EQUIPMNT — Maillots & Tenues Personnalisés pour Clubs Sportifs</title>
<meta name="description" content="BOTH EQUIPMNT — Maillots & Tenues Personnalisés pour Clubs Sportifs. Créez des maillots et tenues personnalisés à l'image de votre club. Both Equipmnt conçoit des collections complètes pour les clubs de sport collectif : match, entraînement, lifestyle.">
<meta name="keywords" content="équipementier sportif, maillot personnalisé, tenue club sport, design sportif, both equipmnt">
<meta name="author" content="BOTH EQUIPMNT">

<!-- Open Graph (partages Facebook, LinkedIn) -->
<meta property="og:title" content="BOTH EQUIPMNT — Maillots & Tenues Personnalisés pour Clubs Sportifs">
<meta property="og:description" content="Créez des maillots et tenues personnalisés à l'image de votre club. Collections complètes pour clubs de sport collectif.">
<meta property="og:image" content="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400">
<meta property="og:url" content="https://bothequipmnt.com">
<meta property="og:type" content="website">
<meta property="og:locale" content="fr_FR">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="BOTH EQUIPMNT — Maillots & Tenues Personnalisés pour Clubs Sportifs">
<meta name="twitter:description" content="Créez des maillots et tenues personnalisés à l'image de votre club. Collections complètes pour clubs de sport collectif.">
<meta name="twitter:image" content="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400">

<!-- Canonical -->
<link rel="canonical" href="https://bothequipmnt.com">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* =============================================
   RESET & VARIABLES
   ============================================= */
*,*::before,*::after{ box-sizing:border-box; margin:0; padding:0; }
:root{
  --black:#0a0a0a;
  --white:#fafaf8;
  --off:#0a0a0a;
  --grey-200:#1a1a1a;
  --grey-400:#6a6a6a;
  --grey-600:#9a9a9a;
  --red:#ffd700;
  --red-dark:#ffcc00;
  --red-bg:#2a2400;
  --green:#2e7d5e;
  --blue:#2c5f8a;
  --amber:#a07b2e;
  --display:'Oswald',sans-serif;
  --body:'Work Sans',sans-serif;
  --ease:.42s cubic-bezier(.4,0,.2,1);
}
html{ scroll-behavior:smooth; -webkit-font-smoothing:antialiased; }
body{ font-family:var(--body); background:var(--black); color:var(--white); font-weight:400; line-height:1.65; overflow-x:hidden; }
html{ overflow-x:hidden; }
a{ text-decoration:none; color:inherit; cursor:pointer; }
img{ max-width:100%; display:block; }
input,select,textarea,button{ font-family:var(--body); }
button{ cursor:pointer; }
::selection{ background:var(--red); color:var(--white); }

/* Loader */
#loader{
  position:fixed; inset:0; background:var(--red); z-index:9999;
  display:flex; align-items:center; justify-content:center;
  transition:opacity .6s ease, visibility .6s ease;
}
#loader.out{ opacity:0; visibility:hidden; pointer-events:none; }
.loader-logo img{ height:120px; }

/* =============================================
   NAV
   ============================================= */
nav{
  position:fixed; top:0; left:0; right:0; z-index:100;
  padding:1.2rem 3.5rem;
  display:flex; align-items:center; justify-content:space-between;
  background:rgba(10,10,10,0); backdrop-filter:blur(0px);
  transition:background .4s ease, backdrop-filter .4s ease, padding .4s ease;
}
nav.scrolled{
  background:rgba(10,10,10,.95); backdrop-filter:blur(16px);
  padding:1rem 3.5rem;
  box-shadow:0 1px 0 rgba(255,255,255,.1);
}
.nav-logo{ z-index:2; }
.nav-logo img{ height:55px; transition:filter var(--ease); }
.nav-logo:hover img{ filter:brightness(.85); }

.nav-center{
  position:absolute; left:50%; transform:translateX(-50%);
  display:flex; gap:2.8rem; z-index:1;
}
.nav-link{
  font-size:.72rem; letter-spacing:.22em; text-transform:uppercase; font-weight:600;
  color:var(--white); position:relative; padding:.3rem 0;
  transition:color var(--ease);
}
.nav-link::after{
  content:''; position:absolute; bottom:0; left:0; width:0; height:2px;
  background:var(--red); transition:width var(--ease);
}
.nav-link:hover{ color:var(--red); }
.nav-link:hover::after{ width:100%; }

.nav-vestiaire{
  padding:.6rem 1.5rem; border:2px solid var(--red); background:var(--red);
  font-size:.7rem; letter-spacing:.2em; text-transform:uppercase; font-weight:600;
  color:var(--black); transition:all var(--ease); z-index:2;
}
.nav-vestiaire:hover{ background:var(--red-dark); border-color:var(--red-dark); }

/* =============================================
   HERO CAROUSEL
   ============================================= */
#hero{
  height:100vh; position:relative; overflow:hidden;
}
.hero-slides{ position:absolute; inset:0; }
.hero-slide{
  position:absolute; inset:0;
  background-size:cover; background-position:center;
  opacity:0; transition:opacity 1.2s ease;
}
.hero-slide.active{ opacity:1; }
.hero-slide::after{
  content:''; position:absolute; inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.1) 0%, rgba(0,0,0,.3) 100%);
}

.hero-content{
  position:relative; z-index:2;
  height:100%; display:flex; flex-direction:column;
  align-items:flex-start; justify-content:flex-end; text-align:left;
  padding:0 3.5rem 12vh;
}
.hero-tagline{
  font-family:var(--display); font-size:clamp(2.8rem,8vw,5.5rem);
  font-weight:800; letter-spacing:.04em; line-height:1;
  color:var(--white); text-transform:uppercase;
  opacity:0; animation:heroFadeUp 1s .5s forwards;
}
.hero-buttons{
  margin-top:3rem; display:flex; gap:1.5rem; flex-wrap:wrap;
  justify-content:flex-start;
  opacity:0; animation:heroFadeUp 1s .8s forwards;
}
.btn-hero{
  padding:.95rem 2.5rem; font-size:.75rem; letter-spacing:.22em;
  text-transform:uppercase; font-weight:600; transition:all var(--ease);
}
.btn-hero-outline{
  border:2px solid var(--white); background:transparent; color:var(--white);
}
.btn-hero-outline:hover{ background:var(--white); color:var(--black); }
.btn-hero-filled{
  border:2px solid var(--red); background:var(--red); color:var(--white);
}
.btn-hero-filled:hover{ background:var(--red-dark); border-color:var(--red-dark); }

.hero-scroll{
  position:absolute; bottom:2.5rem; left:50%; transform:translateX(-50%);
  display:flex; flex-direction:column; align-items:center; gap:.6rem;
  opacity:0; animation:heroFadeUp 1s 1.1s forwards;
}
.hero-scroll span{
  font-size:.62rem; letter-spacing:.3em; text-transform:uppercase;
  color:rgba(255,255,255,.8);
}
.scroll-line{
  width:1px; height:42px; background:rgba(255,255,255,.5);
  animation:scrollPulse 2.4s ease infinite;
}
@keyframes scrollPulse{
  0%{transform:scaleY(0);transform-origin:top} 50%{transform:scaleY(1);transform-origin:top}
  51%{transform:scaleY(1);transform-origin:bottom} 100%{transform:scaleY(0);transform-origin:bottom}
}
@keyframes heroFadeUp{ from{opacity:0;transform:translateY(32px)} to{opacity:1;transform:translateY(0)} }

/* Carousel controls */
.carousel-nav{
  position:absolute; bottom:2rem; right:3rem; z-index:3;
  display:flex; gap:.8rem;
}
.carousel-dot{
  width:10px; height:10px; border-radius:50%;
  background:rgba(255,255,255,.4); border:none;
  transition:all var(--ease); cursor:pointer;
}
.carousel-dot.active{ background:var(--white); transform:scale(1.3); }

/* =============================================
   SECTION COMMONS
   ============================================= */
.section{ padding:2rem 3.5rem; position:relative; }
.section-inner{ max-width:1600px; margin:0 auto; }
.section-header{ text-align:center; margin-bottom:2.5rem; }
.section-label{
  font-size:.68rem; letter-spacing:.4em; text-transform:uppercase;
  color:var(--grey-400); margin-bottom:.8rem; font-weight:600;
}
.section-title{
  font-family:var(--display); font-size:clamp(2.5rem,5vw,4.2rem);
  font-weight:700; letter-spacing:.04em; line-height:1.08; text-transform:uppercase;
  color:var(--white);
}
.section-desc{
  font-size:.92rem; color:var(--grey-600); max-width:560px;
  margin:1.5rem auto 0; line-height:1.85;
}

/* =============================================
   VISION / PRÉSENTATION
   ============================================= */
#vision{ background:var(--black); }
.vision-content{
  display:grid; grid-template-columns:1fr 1fr; gap:4rem;
  align-items:center;
}
.vision-text h2{
  font-family:var(--display); font-size:clamp(2rem,4vw,3.2rem);
  font-weight:700; letter-spacing:.04em; text-transform:uppercase;
  margin-bottom:1.5rem; line-height:1.1;
}
.vision-text p{
  font-size:.95rem; color:var(--grey-600); line-height:1.9;
  margin-bottom:1.2rem;
}
.btn-vision{
  margin-top:2rem; display:inline-block;
  padding:.85rem 2.2rem; border:2px solid var(--red); background:transparent;
  font-size:.72rem; letter-spacing:.2em; text-transform:uppercase; font-weight:600;
  color:var(--red); transition:all var(--ease);
  box-sizing:border-box; line-height:1.5; text-align:center;
}
.btn-vision:hover{ background:var(--red); color:var(--black); }
.vision-image{
  aspect-ratio:4/5; background:var(--grey-200); overflow:hidden;
  position:relative;
}
.vision-image img{ width:100%; height:100%; object-fit:cover; }

/* =============================================
   ACTUALITÉS - SCROLL HORIZONTAL
   ============================================= */
#actualites{ background:var(--black); position:relative; overflow:hidden; }
.news-wrapper{
  max-width:1600px;
  margin:0 auto;
  padding:0 3.5rem;
}
.news-scroll-container{
  overflow-x:auto;
  overflow-y:hidden;
  scrollbar-width:none;
  -ms-overflow-style:none;
  margin-bottom:2rem;
}
.news-scroll-container::-webkit-scrollbar{
  display:none;
}
.news-grid{
  display:flex;
  gap:1.5rem;
  padding:1rem 0;
}
.news-card{
  min-width:380px;
  max-width:380px;
  flex-shrink:0;
  cursor:pointer;
  transition:transform var(--ease);
  background:var(--black);
}
.news-card:hover{ 
  transform:translateY(-8px); 
}
.news-card-img{
  aspect-ratio:16/10;
  background:var(--grey-200);
  overflow:hidden;
  margin-bottom:1.5rem;
  position:relative;
}
.news-card-img img{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .7s ease;
}
.news-card:hover .news-card-img img{ 
  transform:scale(1.08); 
}
.news-date{
  font-size:.7rem;
  letter-spacing:.22em;
  text-transform:uppercase;
  color:var(--grey-400);
  margin-bottom:.8rem;
  font-weight:600;
}
.news-title{
  font-family:var(--display);
  font-size:1.5rem;
  font-weight:700;
  letter-spacing:.02em;
  margin-bottom:.8rem;
  line-height:1.2;
  color:var(--red);
  text-transform:uppercase;
}
.news-excerpt{ 
  font-size:.9rem;
  color:var(--grey-400);
  line-height:1.75;
}
.news-view-more{
  text-align:center;
  margin-top:2rem;
}
.btn-view-more{
  display:inline-block;
  padding:.9rem 2.5rem;
  border:2px solid var(--white);
  background:transparent;
  font-size:.72rem;
  letter-spacing:.22em;
  text-transform:uppercase;
  font-weight:600;
  color:var(--white);
  transition:all var(--ease);
}
.btn-view-more:hover{
  background:var(--white);
  color:var(--black);
}

/* =============================================
   PORTFOLIO RARE DESIGN STYLE
   ============================================= */
#portfolio{ background:var(--white); padding-bottom:6rem; }
.portfolio-preview{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  grid-template-rows:280px 280px;
  gap:16px;
}
.port-item{
  position:relative; overflow:hidden; cursor:pointer;
  background:var(--grey-200);
}
.port-item:nth-child(1){ grid-column:1/3; grid-row:1/3; }
.port-item:nth-child(2){ grid-column:3; grid-row:1; }
.port-item:nth-child(3){ grid-column:4; grid-row:1; }
.port-item:nth-child(4){ grid-column:3/5; grid-row:2; }

.port-item-img{
  width:100%; height:100%; object-fit:cover;
  transition:transform .6s cubic-bezier(.4,0,.2,1);
}
.port-item:hover .port-item-img{ transform:scale(1.08); }

.port-item-overlay{
  position:absolute; inset:0;
  background:var(--red);
  display:flex; align-items:center; justify-content:center;
  opacity:0; transition:opacity var(--ease);
}
.port-item:hover .port-item-overlay{ opacity:.92; }
.port-item-name{
  font-family:var(--display); font-size:clamp(1.2rem,2vw,1.8rem);
  font-weight:700; letter-spacing:.08em; text-transform:uppercase;
  color:var(--white); text-align:center; padding:1rem;
}

.btn-view-all{
  margin:4rem auto 0; display:block; text-align:center;
  padding:1rem 3rem; border:2px solid var(--red); background:transparent;
  font-size:.75rem; letter-spacing:.22em; text-transform:uppercase; font-weight:600;
  color:var(--red); transition:all var(--ease);
}
.btn-view-all:hover{ background:var(--red); color:var(--black); }

/* =============================================
   PARTNER LOGOS
   ============================================= */
#partners{ background:var(--black); padding:2rem 3.5rem; }
.partners-inner{ max-width:1600px; margin:0 auto; text-align:center; }
.partners-title{
  font-size:.9rem; letter-spacing:.15em; text-transform:uppercase;
  color:var(--grey-600); margin-bottom:2.5rem; font-weight:500;
}
.partners-grid{
  display:flex; justify-content:center; align-items:center;
  gap:1.5rem 1.2rem; flex-wrap:wrap;
}
.partner-logo{
  height:100px; filter:grayscale(1) opacity(.6);
  transition:filter var(--ease);
}
.partner-logo:hover{ filter:grayscale(0) opacity(1); }

/* =============================================
   FOOTER
   ============================================= */
footer{ background:#1a1a1a; color:var(--white); padding:3rem 3.5rem 2rem; border-top:1px solid #333; }
.footer-inner{
  max-width:1600px; margin:0 auto;
  display:flex; justify-content:space-between; align-items:flex-start;
  flex-wrap:wrap; gap:3rem;
}
.footer-logo img{ height:32px; filter:brightness(0) invert(1); }
.footer-links{ display:flex; gap:3rem; }
.footer-links a{
  font-size:.72rem; letter-spacing:.18em; text-transform:uppercase;
  color:var(--grey-400); font-weight:600; transition:color var(--ease);
}
.footer-links a:hover{ color:var(--white); }
.footer-bottom{
  max-width:1200px; margin:3rem auto 0;
  padding-top:1.8rem; border-top:1px solid #2a2a2a;
  font-size:.7rem; color:var(--grey-600);
  display:flex; justify-content:space-between;
}

/* =============================================
   LOGIN SCREEN (inchangé)
   ============================================= */
#login-screen{
  display:none; position:fixed; inset:0; background:var(--white); z-index:201;
  align-items:center; justify-content:center;
}
#login-screen.active{ display:flex; }
.login-box{ width:100%; max-width:400px; text-align:center; padding:2.5rem; }
.login-box-logo img{ height:42px; margin:0 auto 3rem; }
.login-box h2{
  font-family:var(--display); font-size:2rem; font-weight:700;
  letter-spacing:.06em; margin-bottom:.5rem; text-transform:uppercase;
}
.login-box p{ font-size:.85rem; color:var(--grey-400); margin-bottom:2.2rem; line-height:1.8; }
.login-input{
  width:100%; padding:.9rem 1.1rem; border:2px solid var(--grey-200); background:transparent;
  font-size:.88rem; outline:none; transition:border-color var(--ease); margin-bottom:.9rem;
}
.login-input:focus{ border-color:var(--black); }
.login-error{ font-size:.75rem; color:var(--red); min-height:1rem; margin-bottom:.7rem; }
.btn-login{
  width:100%; padding:.9rem; background:var(--black); color:var(--white); border:none;
  font-size:.72rem; letter-spacing:.24em; text-transform:uppercase; font-weight:600;
  transition:background var(--ease);
}
.btn-login:hover{ background:#2a2a2a; }
.btn-login:disabled{ background:var(--grey-200); color:var(--grey-400); }
.login-back{
  margin-top:2rem; font-size:.75rem; color:var(--grey-400);
  background:none; border:none; transition:color var(--ease);
}
.login-back:hover{ color:var(--black); }

/* =============================================
   PORTAL (inchangé mais masqué par défaut)
   ============================================= */
#vestiaire{
  display:none; position:fixed; inset:0; background:var(--white); z-index:200; overflow-y:auto;
}
#vestiaire.active{ display:block; }
.v-nav{
  position:sticky; top:0; background:rgba(250,250,248,.94); backdrop-filter:blur(16px);
  border-bottom:1px solid var(--grey-200); padding:1rem 2.8rem;
  display:flex; align-items:center; justify-content:space-between; z-index:10;
}
.v-nav-left{ display:flex; align-items:center; gap:2rem; }
.v-nav-logo img{ height:75px; }
.v-nav-club-wrapper{
  display:flex; align-items:center; gap:1.5rem;
  border-left:1px solid var(--grey-200); padding-left:2rem;
}
.v-club-logo{
  height:70px; max-width:140px; object-fit:contain;
}
.v-nav-club{
  font-size:.85rem; letter-spacing:.2em; text-transform:uppercase;
  color:var(--grey-400); font-weight:600;
}
.v-nav-right{ display:flex; gap:1.4rem; align-items:center; }
.v-tab{
  font-size:.7rem; letter-spacing:.2em; text-transform:uppercase; font-weight:600;
  color:var(--grey-600); background:none; border:none; padding:.5rem 0;
  border-bottom:2px solid transparent; transition:all var(--ease);
}
.v-tab:hover{ color:var(--black); }
.v-tab.active{ color:var(--black); border-bottom-color:var(--red); }
.v-btn-cart{
  position:relative; padding:.5rem 1.1rem; border:2px solid var(--black); background:transparent;
  font-size:.68rem; letter-spacing:.2em; text-transform:uppercase; font-weight:600;
  color:var(--black); transition:all var(--ease);
}
.v-btn-cart:hover{ background:var(--black); color:var(--white); }
.v-btn-cart:hover .cart-badge{ border-color:var(--black); }
.cart-badge{
  position:absolute; top:-8px; right:-8px;
  background:var(--red); color:var(--white); font-size:.58rem; font-weight:700;
  width:18px; height:18px; border-radius:50%; display:none;
  align-items:center; justify-content:center;
  border:2px solid var(--white);
}
.cart-badge.show{ display:flex; }
.v-btn-quit{
  padding:.45rem .95rem; border:2px solid var(--grey-200); background:transparent;
  font-size:.66rem; letter-spacing:.18em; text-transform:uppercase;
  color:var(--grey-600); font-weight:600; transition:all var(--ease);
}
.v-btn-quit:hover{ border-color:var(--black); color:var(--black); }

.v-section{ display:none; padding:3rem 2.8rem; min-height:calc(100vh - 58px); }
.v-section.active{ display:block; }
.v-section-inner{ max-width:1200px; margin:0 auto; }

.cat-header{
  display:flex; justify-content:space-between; align-items:flex-end;
  margin-bottom:2.5rem; flex-wrap:wrap; gap:1rem;
}
.cat-header h2{
  font-family:var(--display); font-size:2.2rem; font-weight:700;
  letter-spacing:.04em; text-transform:uppercase;
}
.cat-filters{ display:flex; gap:.7rem; flex-wrap:wrap; }
.cat-filter-btn{
  padding:.5rem 1.1rem; border:2px solid #d0d0d0; background:#fafafa;
  font-size:.68rem; letter-spacing:.18em; text-transform:uppercase; font-weight:600;
  color:#666; transition:all var(--ease);
}
.cat-filter-btn:hover,
.cat-filter-btn.active{ border-color:var(--black); color:var(--black); background:#f0f0f0; }

.product-grid{
  display:grid; grid-template-columns:repeat(auto-fill,minmax(270px,1fr)); gap:2rem;
}

.category-section{
  grid-column:1/-1;
  margin-top:2.5rem;
}
.category-section:first-child{ margin-top:0; }
.category-title{
  font-family:var(--display); font-size:1.5rem; font-weight:700;
  letter-spacing:.06em; text-transform:uppercase;
  color:var(--black); margin-bottom:1.5rem;
  padding-bottom:.8rem; border-bottom:2px solid var(--red);
}
.product-card{ 
  transition:transform var(--ease); cursor:pointer;
  background:#f5f5f5; padding:1rem; border-radius:4px;
  border:1px solid #e0e0e0;
}
.product-card:hover{ transform:translateY(-4px); box-shadow:0 4px 12px rgba(0,0,0,.08); }
.product-card-img{
  aspect-ratio:1/1; background:#e8e8e8; overflow:hidden; position:relative; margin-bottom:1rem;
  border-radius:3px;
}
.product-card-img img{
  width:100%; height:100%; object-fit:cover;
  transition:transform .6s ease;
}
.product-card:hover .product-card-img img{ transform:scale(1.05); }
.product-card-tag{
  position:absolute; top:.9rem; left:.9rem;
  background:var(--red); color:var(--black);
  font-size:.6rem; letter-spacing:.2em; text-transform:uppercase;
  padding:.3rem .7rem; font-weight:700;
}
.product-card-name{ 
  font-size:.9rem; font-weight:600; margin-bottom:.3rem; 
  color:var(--black);
}
.product-card-price{ 
  font-size:.84rem; color:var(--grey-400);
}

.modal-backdrop{
  display:none; position:fixed; inset:0; background:rgba(10,10,10,.52); z-index:300;
  align-items:center; justify-content:center; padding:2rem;
}
.modal-backdrop.active{ display:flex; }
.modal-box{
  background:var(--white); max-width:500px; width:100%; padding:2.5rem;
  position:relative; border-radius:8px;
}
.modal{
  background:var(--white); max-width:800px; width:100%; max-height:92vh; overflow-y:auto;
  display:grid; grid-template-columns:1fr 1fr; position:relative;
}
.modal-close{
  position:absolute; top:.9rem; right:.9rem; z-index:5;
  width:36px; height:36px; border-radius:50%; border:none;
  background:rgba(250,250,248,.95); font-size:1.05rem; color:var(--black);
  display:flex; align-items:center; justify-content:center;
  transition:background var(--ease);
}
.modal-close:hover{ background:var(--off); }
.modal-img{ background:#f5f5f5; min-height:400px; display:flex; align-items:center; justify-content:center; }
.modal-img img{ width:100%; height:100%; object-fit:contain; }
/* Carrousel produit */
.product-carousel{
  position:relative;
  width:100%;
  height:100%;
  overflow:hidden;
}
.carousel-images{
  display:flex;
  width:100%;
  height:100%;
  transition:transform 0.4s ease;
}
.carousel-images img{
  flex-shrink:0;
  width:100%;
  height:100%;
  object-fit:contain;
}
.carousel-arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:40px;
  height:40px;
  background:rgba(255,255,255,0.9);
  border:none;
  border-radius:50%;
  font-size:1.2rem;
  cursor:pointer;
  z-index:2;
  transition:all 0.3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--black);
}
.carousel-arrow:hover{
  background:var(--red);
  color:var(--white);
  transform:translateY(-50%) scale(1.1);
}
.carousel-arrow-left{ left:1rem; }
.carousel-arrow-right{ right:1rem; }
.carousel-dots{
  position:absolute;
  bottom:1rem;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:0.5rem;
  z-index:2;
}
.carousel-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:rgba(255,255,255,0.5);
  cursor:pointer;
  transition:all 0.3s ease;
}
.carousel-dot.active{
  background:var(--red);
  width:24px;
  border-radius:4px;
}
.modal-body{
  padding:2.6rem; display:flex; flex-direction:column; justify-content:center;
}
.modal-body h3{
  font-family:var(--display); font-size:2rem; font-weight:700;
  letter-spacing:.04em; margin-bottom:.4rem; text-transform:uppercase;
  color:var(--black);
}
.modal-price-tag{ font-size:1rem; color:var(--grey-600); margin-bottom:1.1rem; }
.modal-desc{
  font-size:.84rem; color:var(--grey-600); line-height:1.8;
  margin-bottom:1.8rem;
}

.field{ margin-bottom:1.1rem; }
.field label{
  display:block; font-size:.64rem; letter-spacing:.22em; text-transform:uppercase;
  color:var(--grey-400); margin-bottom:.4rem; font-weight:600;
}
.field select,
.field input,
.field textarea{
  width:100%; padding:.7rem .9rem; border:2px solid var(--grey-200); background:transparent;
  font-size:.86rem; color:var(--black); outline:none; transition:border-color var(--ease);
  -webkit-appearance:none; appearance:none; font-family:var(--body);
}
.field textarea{
  resize:vertical; min-height:180px;
}
.field select{
  background-image:url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%236e6c68' stroke-width='1.6'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 12px center; padding-right:34px;
}
.field select:focus,
.field input:focus{ border-color:var(--black); }

.qty-row{
  display:flex; align-items:center; gap:0; border:2px solid var(--grey-200); width:fit-content;
}
.qty-btn{
  width:40px; height:40px; border:none; background:transparent; font-size:1.15rem;
  color:var(--grey-600); transition:all var(--ease);
}
.qty-btn:hover{ background:var(--off); color:var(--black); }
.qty-val{ width:46px; text-align:center; font-size:.9rem; font-weight:600; color:var(--black); }

.btn-add-cart{
  margin-top:1.8rem; width:100%; padding:1rem; border:2px solid var(--black); background:transparent;
  font-size:.85rem; letter-spacing:.2em; text-transform:uppercase; font-weight:600;
  color:var(--black); transition:all var(--ease);
}
.btn-add-cart:hover:not(:disabled){ background:var(--black); color:var(--white); }
.btn-add-cart:disabled{ opacity:.35; cursor:not-allowed; }

/* Tableau tailles style Ralawise */
.size-table{ width:100%; border-collapse:collapse; margin-bottom:.5rem; }
.size-table thead th{
  font-size:.6rem; letter-spacing:.18em; text-transform:uppercase; color:var(--grey-400);
  font-weight:600; padding:.6rem .5rem; border-bottom:2px solid var(--grey-200); text-align:center;
}
.size-table thead th:first-child{ text-align:left; }
.size-table tbody td{
  padding:.5rem; border-bottom:1px solid var(--grey-100); text-align:center;
  font-size:.85rem; color:var(--black);
}
.size-table tbody td:first-child{ font-weight:700; text-align:left; }
.size-table .qty-input{
  width:60px; padding:.4rem; border:2px solid var(--grey-200); text-align:center;
  font-size:.85rem; font-weight:600; outline:none; font-family:var(--body);
  transition:border-color var(--ease);
}
.size-table .qty-input:focus{ border-color:var(--black); }
.size-table .qty-input::-webkit-inner-spin-button{ opacity:1; }

/* Personnalisation */
.perso-btn{
  font-size:.65rem; letter-spacing:.1em; text-transform:uppercase; font-weight:600;
  color:var(--red); background:none; border:1px solid var(--red); padding:.25rem .6rem;
  cursor:pointer; transition:all var(--ease); border-radius:2px;
}
.perso-btn:hover{ background:var(--red); color:var(--white); }
.perso-btn.done{ color:var(--grey-400); border-color:var(--grey-200); }
.perso-btn.done:hover{ background:var(--grey-200); color:var(--black); }

.perso-overlay{
  display:none; position:fixed; inset:0; background:rgba(10,10,10,.52); z-index:350;
  align-items:center; justify-content:center; padding:2rem;
}
.perso-overlay.active{ display:flex; }
.perso-box{
  background:var(--white); max-width:420px; width:100%; padding:2rem; position:relative;
  max-height:80vh; overflow-y:auto;
}
.perso-box h4{
  font-family:var(--display); font-size:1.1rem; font-weight:700; margin-bottom:1.2rem;
  text-transform:uppercase; letter-spacing:.04em;
}
.perso-row{
  display:grid; grid-template-columns:auto 1fr 80px; gap:.5rem; align-items:center;
  margin-bottom:.6rem; font-size:.82rem;
}
.perso-row input{
  padding:.45rem .6rem; border:2px solid var(--grey-200); font-size:.82rem;
  outline:none; font-family:var(--body);
}
.perso-row input:focus{ border-color:var(--black); }
.perso-row span{ font-weight:600; color:var(--grey-400); }
.perso-save{
  margin-top:1rem; width:100%; padding:.8rem; border:2px solid var(--black);
  background:var(--black); color:var(--white); font-size:.75rem; letter-spacing:.2em;
  text-transform:uppercase; font-weight:600; cursor:pointer;
}

/* Modal footer */
.modal-footer{ margin-top:auto; padding-top:1rem; }
.modal-footer-info{
  display:flex; justify-content:space-between; font-size:.82rem; color:var(--grey-600);
  margin-bottom:.3rem;
}

/* Min commande warning dans modal */
.modal-min-warn{
  background:#fff3cd; border:1px solid #ffc107; padding:.6rem .8rem; margin-bottom:.8rem;
  font-size:.72rem; color:#856404; font-weight:600; display:none;
}
.modal-min-warn.show{ display:block; }

#cart-backdrop{ display:none; position:fixed; inset:0; background:rgba(10,10,10,.35); z-index:399; }
#cart-backdrop.active{ display:block; }
#cart-drawer{
  position:fixed; top:0; right:-460px; width:420px; max-width:94vw; height:100vh;
  background:var(--white); border-left:1px solid var(--grey-200);
  z-index:400; display:flex; flex-direction:column;
  transition:right var(--ease); box-shadow:-8px 0 48px rgba(0,0,0,.09);
}
#cart-drawer.open{ right:0; }

.cart-head{
  padding:1.8rem 2rem; border-bottom:1px solid var(--grey-200);
  display:flex; justify-content:space-between; align-items:center;
}
.cart-head h3{
  font-family:var(--display); font-size:1.45rem; font-weight:700;
  letter-spacing:.08em; text-transform:uppercase; color:var(--black);
}
.cart-close-btn{ background:none; border:none; font-size:1.3rem; color:var(--grey-600); }

.cart-items-wrap{ flex:1; overflow-y:auto; padding:1.4rem 2rem; }
.cart-empty-msg{
  text-align:center; padding:3.5rem 1rem; color:var(--grey-400);
  font-size:.86rem; font-style:italic;
}
.cart-item{
  display:flex; gap:1rem; padding:1rem 0; border-bottom:1px solid var(--off);
}
.cart-item-img{
  width:62px; height:62px; background:var(--off); flex-shrink:0; overflow:hidden;
}
.cart-item-img img{ width:100%; height:100%; object-fit:cover; }
.cart-item-info{ flex:1; min-width:0; }
.cart-item-name{ font-size:.84rem; font-weight:600; margin-bottom:.18rem; color:var(--black); }
.cart-item-meta{ font-size:.73rem; color:var(--grey-400); line-height:1.6; }
.cart-item-right{ display:flex; flex-direction:column; align-items:flex-end; gap:.35rem; }
.cart-item-price{ font-size:.84rem; font-weight:600; color:var(--black); }
.btn-remove{
  font-size:.64rem; letter-spacing:.16em; text-transform:uppercase;
  color:var(--grey-400); background:none; border:none;
  transition:color var(--ease); font-weight:600;
}
.btn-remove:hover{ color:var(--red); }

.cart-foot{ padding:1.8rem 2rem; border-top:1px solid var(--grey-200); }
.cart-total-row{
  display:flex; justify-content:space-between; font-weight:600; margin-bottom:1.1rem; color:var(--black);
}
.cart-min-warn{
  display:none; font-size:.75rem; color:var(--red); padding:.6rem .8rem;
  background:var(--red-bg); border:1px solid #f0c8c4; margin-bottom:.9rem;
  line-height:1.6;
}
.cart-min-warn.show{ display:block; }
.btn-validate{
  width:100%; padding:1rem; background:var(--black); color:var(--white); border:none;
  font-size:.72rem; letter-spacing:.24em; text-transform:uppercase; font-weight:600;
  transition:background var(--ease);
}
.btn-validate:hover{ background:#2a2a2a; }
.btn-validate:disabled{ background:var(--grey-200); color:var(--grey-400); }

.dash-header{ margin-bottom:2.2rem; }
.dash-header h2{
  font-family:var(--display); font-size:2.2rem; font-weight:700;
  letter-spacing:.04em; margin-bottom:.4rem; text-transform:uppercase;
}
.dash-header p{ font-size:.84rem; color:var(--grey-600); }

.orders-table{ width:100%; border-collapse:collapse; }
.orders-table th{
  text-align:left; font-size:.64rem; letter-spacing:.24em; text-transform:uppercase;
  color:var(--grey-400); font-weight:600; padding:.8rem 0;
  border-bottom:1px solid var(--grey-200);
}
.orders-table td{
  padding:1.1rem 0; border-bottom:1px solid var(--off);
  font-size:.86rem; color:var(--grey-600);
}
.orders-table td:first-child{
  color:var(--black); font-weight:600; font-family:var(--display);
  font-size:1.05rem; letter-spacing:.06em;
}

.badge{
  display:inline-block; padding:.28rem .9rem;
  font-size:.64rem; letter-spacing:.16em; text-transform:uppercase;
  border:1px solid; font-weight:600;
}
.badge-pending{ color:var(--amber); border-color:#e8d7a8; background:#faf7ee; }
.badge-production{ color:var(--blue); border-color:#b0d2ee; background:#eff6fb; }
.badge-shipped{ color:var(--green); border-color:#a8ddc8; background:#eff9f4; }
.badge-delivered{ color:var(--grey-600); border-color:var(--grey-200); background:var(--off); }

#toast{
  position:fixed; bottom:2.2rem; right:2.2rem;
  background:var(--black); color:var(--white);
  padding:1rem 1.9rem; font-size:.8rem; letter-spacing:.05em;
  z-index:500; transform:translateY(150%); transition:transform .45s cubic-bezier(.4,0,.2,1);
  pointer-events:none; max-width:340px; box-shadow:0 8px 32px rgba(0,0,0,.22);
}
#toast.show{ transform:translateY(0); }

.spinner{
  width:32px; height:32px; border:2px solid var(--grey-200); border-top-color:var(--black);
  border-radius:50%; animation:spin .6s linear infinite; margin:3.5rem auto;
}
@keyframes spin{ to{transform:rotate(360deg)} }

/* =============================================
   RESPONSIVE
   ============================================= */
@media(max-width:1024px){
  .portfolio-preview{
    grid-template-columns:repeat(2,1fr);
    grid-template-rows:220px 220px 220px;
  }
  .port-item:nth-child(1){ grid-column:1/3; grid-row:1; }
  .port-item:nth-child(2){ grid-column:1; grid-row:2; }
  .port-item:nth-child(3){ grid-column:2; grid-row:2; }
  .port-item:nth-child(4){ grid-column:1/3; grid-row:3; }
  .vision-content{ grid-template-columns:1fr; gap:3rem; }
  .news-grid{ grid-template-columns:1fr; }
}

@media(max-width:768px){
  /* Nav */
  nav{ padding:.8rem 1rem; }
  .nav-center{ display:none; }
  .nav-vestiaire{ font-size:.58rem; padding:.45rem .7rem; letter-spacing:.1em; }

  /* Hero */
  .hero-content{ padding:0 1.2rem 8vh; }
  .hero-tagline{ font-size:2.2rem; line-height:1.1; }
  .hero-buttons{ flex-direction:column; gap:.8rem; margin-top:1.5rem; }
  .btn-hero{ width:100%; text-align:center; padding:.8rem 1.2rem; font-size:.68rem; }
  .hero-scroll{ display:none; }
  .carousel-nav{ bottom:auto; top:1rem; right:1rem; }

  /* Sections */
  .section{ padding:3rem 1.2rem; }
  .section-title{ font-size:2rem; }

  /* Vision */
  .vision-content{ grid-template-columns:1fr; gap:2rem; }

  /* News */
  .news-wrapper{ padding:0 1.2rem; }
  .news-grid-horizontal{ padding:0 1.2rem; }
  .news-card-h{ min-width:280px; max-width:280px; }
  .news-card{ min-width:280px; max-width:280px; }

  /* Portfolio */
  .portfolio-preview{
    grid-template-columns:1fr;
    grid-template-rows:auto;
  }
  .port-item:nth-child(1),
  .port-item:nth-child(2),
  .port-item:nth-child(3),
  .port-item:nth-child(4){
    grid-column:1; grid-row:auto;
  }
  .btn-view-all{ font-size:.68rem; padding:.7rem 1.5rem; }

  /* Contact */
  #contact .section-title{ font-size:2rem; }
  .contact-buttons{ flex-direction:column; align-items:stretch; gap:.8rem; }
  .contact-buttons .btn-hero{ width:100%; }

  /* Partners */
  .partners-grid{
    display:grid !important;
    grid-template-columns:repeat(4, 1fr);
    gap:1rem;
    justify-items:center;
    align-items:center;
  }
  #partners{ padding:2rem 1.2rem; }
  .partner-logo{ height:50px; }

  /* Footer */
  footer{ padding:2rem 1.2rem 1.5rem; }
  .footer-inner{ flex-direction:column; gap:1.5rem; align-items:flex-start; }
  .footer-links{ flex-wrap:wrap; gap:1.2rem; }
  .footer-links a{ font-size:.65rem; }
  .footer-bottom{ flex-direction:column; gap:.5rem; font-size:.65rem; }

  /* Login */
  .login-box{ padding:2rem 1.2rem; }
  .login-box-logo img{ height:36px; }

  /* Vestiaire */
  .v-nav{ padding:.6rem .8rem; flex-wrap:wrap; gap:.5rem; }
  .v-nav-logo img{ height:38px; }
  .v-club-logo{ height:35px; }
  .v-nav-club-wrapper{ padding-left:.8rem; gap:.5rem; border-left:none; }
  .v-nav-left{ gap:.6rem; }
  .v-nav-right{ gap:.5rem; width:100%; justify-content:center; }
  .v-tab{ font-size:.55rem; letter-spacing:.1em; padding:.3rem 0; }
  .v-btn-cart{ font-size:.55rem; padding:.35rem .6rem; }
  .v-btn-quit{ font-size:.55rem; padding:.3rem .5rem; }
  .v-section{ padding:1.5rem 1rem; }
  .cat-header{ flex-direction:column; align-items:flex-start; gap:.8rem; }
  .cat-header h2{ font-size:1.6rem; }
  .cat-filters{ gap:.4rem; }
  .cat-filter-btn{ font-size:.6rem; padding:.4rem .7rem; }
  .product-grid{ grid-template-columns:repeat(2, 1fr); gap:1rem; }

  /* Modal produit */
  .modal{ grid-template-columns:1fr; }
  .modal-img{ min-height:260px; }
}

/* =============================================
   PAGE DE CONFIRMATION COMMANDE
   ============================================= */
#order-confirmation{
  position:fixed;
  inset:0;
  z-index:999;
  display:none;
}
#order-confirmation.active{
  display:flex;
  align-items:center;
  justify-content:center;
}
.confirmation-overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.8);
  backdrop-filter:blur(4px);
}
.confirmation-modal{
  position:relative;
  background:var(--white);
  width:95%;
  max-width:900px;
  max-height:95vh;
  overflow-y:auto;
  border-radius:8px;
  box-shadow:0 20px 60px rgba(0,0,0,0.3);
}
.confirmation-close{
  position:absolute;
  top:1rem;
  right:1rem;
  width:40px;
  height:40px;
  border:none;
  background:var(--white);
  color:var(--black);
  font-size:1.5rem;
  cursor:pointer;
  border-radius:50%;
  transition:all var(--ease);
  z-index:1;
}
.confirmation-close:hover{
  background:var(--black);
  color:var(--white);
  transform:rotate(90deg);
}
.confirmation-header{
  text-align:center;
  padding:1.5rem 2rem 1.5rem;
  border-bottom:1px solid var(--grey-200);
}
.confirmation-icon{
  width:80px;
  height:80px;
  margin:0 auto 1.5rem;
  background:var(--red);
  color:var(--white);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:3rem;
  font-weight:700;
}
.confirmation-header h2{
  font-family:var(--display);
  font-size:2rem;
  font-weight:700;
  color:var(--black);
  margin-bottom:0.5rem;
  text-transform:uppercase;
  letter-spacing:0.04em;
}
.confirmation-header p{
  color:var(--grey-400);
  font-size:0.95rem;
}
.confirmation-body{
  padding:2rem;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:2rem;
}
.confirmation-section{
  margin-bottom:2rem;
}
.confirmation-section:last-child{
  margin-bottom:0;
}
.confirmation-section h3{
  font-family:var(--display);
  font-size:1.2rem;
  font-weight:700;
  color:var(--black);
  margin-bottom:1rem;
  text-transform:uppercase;
  letter-spacing:0.04em;
}
#confirmation-recap{
  background:#f5f5f5;
  padding:1rem;
  border-radius:4px;
  font-size:0.9rem;
  line-height:1.8;
  color:var(--black);
}
#confirmation-recap strong{
  color:var(--black);
}
.rib-section{
  background:#fffbeb;
  padding:1.5rem;
  border-radius:8px;
  border:2px solid var(--red);
}
.rib-instruction{
  color:var(--black);
  font-size:0.9rem;
  margin-bottom:1.5rem;
  line-height:1.6;
}
.rib-info{
  background:var(--white);
  padding:1.5rem;
  border-radius:4px;
  margin-bottom:1rem;
}
.rib-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0.8rem 0;
  border-bottom:1px solid var(--grey-200);
}
.rib-row:last-child{
  border-bottom:none;
}
.rib-label{
  font-weight:600;
  color:var(--grey-600);
  font-size:0.85rem;
  text-transform:uppercase;
  letter-spacing:0.1em;
}
.rib-value{
  font-family:monospace;
  font-size:0.95rem;
  color:var(--black);
  font-weight:600;
}
.rib-copyable{
  cursor:pointer;
  padding:0.4rem 0.8rem;
  background:#f5f5f5;
  border-radius:4px;
  transition:all var(--ease);
  position:relative;
}
.rib-copyable:hover{
  background:var(--red);
  color:var(--white);
}
.copy-icon{
  margin-left:0.5rem;
  font-size:0.9rem;
  opacity:0.6;
}
.rib-reference{
  background:var(--red);
  color:var(--black);
  font-weight:700;
}
.rib-note{
  text-align:center;
  font-size:0.85rem;
  color:var(--grey-400);
  font-style:italic;
}
.confirmation-footer{
  padding:1.5rem 2rem;
  border-top:1px solid var(--grey-200);
  text-align:center;
}
.btn-confirmation-close{
  padding:0.9rem 3rem;
  background:var(--black);
  color:var(--white);
  border:2px solid var(--black);
  font-size:0.75rem;
  letter-spacing:0.2em;
  text-transform:uppercase;
  font-weight:600;
  cursor:pointer;
  transition:all var(--ease);
}
.btn-confirmation-close:hover{
  background:transparent;
  color:var(--black);
}
</style>
</head>
<body>

<!-- ========== LOADER ========== -->
<div id="loader"><div class="loader-logo"><img src="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400" alt="BOTH"></div></div>

<!-- ========== NAV ========== -->
<nav id="main-nav">
  <a href="#" class="nav-logo" onclick="scrollTop()">
    <img src="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400" alt="BOTH">
  </a>
  <div class="nav-center">
    <a href="#vision" class="nav-link">À Propos</a>
    <a href="#actualites" class="nav-link">Actualités</a>
    <a href="#portfolio" class="nav-link">Projets</a>
    <a href="#contact" class="nav-link">Contact</a>
  </div>
  <button class="nav-vestiaire" onclick="openLogin()">Mon Vestiaire</button>
</nav>

<!-- ========== PUBLIC SITE ========== -->
<div id="studio">

  <!-- HERO CAROUSEL -->
  <section id="hero">
    <div class="hero-slides">
      <!-- Pour l'instant 1 seule slide, tu ajouteras les autres images plus tard -->
      <div class="hero-slide active" style="background-image:url('https://lh3.googleusercontent.com/d/1M5f26A3vyz7d7ERVI0d-QEX5Fi8BiiW0');"></div>
    </div>
    <div class="hero-content">
      <h1 class="hero-tagline">ÉQUIPER L'AMBITION</h1>
      <div class="hero-buttons">
        <a href="#vision" class="btn-hero btn-hero-outline">Découvrir</a>
        <button class="btn-hero btn-hero-filled" onclick="openLogin()">Mon Vestiaire</button>
      </div>
    </div>
    <div class="hero-scroll">
      <span>Explorer</span>
      <div class="scroll-line"></div>
    </div>
    <!-- Carousel controls (caché si 1 seule image) -->
    <div class="carousel-nav" style="display:none;">
      <button class="carousel-dot active"></button>
    </div>
  </section>

  <!-- VISION / PRÉSENTATION -->
  <section id="vision" class="section">
    <div class="section-inner">
      <div class="vision-content">
        <div class="vision-text">
          <h2>LOOK GOOD, PLAY GOOD</h2>
          <p>Votre club mérite plus qu'un simple maillot. Nous concevons des collections complètes — match, entraînement, lifestyle — qui reflètent l'identité et les ambitions de votre club. Une image forte attire des talents, fédère vos membres et renforce vos partenariats.</p>
          <p>Être bien équipé n'est pas un détail — c'est un levier de croissance pour votre club.</p>
          <a href="/vision.html" class="btn-vision">En savoir plus</a>
        </div>
        <div class="vision-image">
          <!-- Placeholder — tu mettras ta vraie image -->
          <div style="width:100%;height:100%;background:#d8d6d2;"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ACTUALITÉS -->
  <section id="actualites" class="section">
    <div class="news-wrapper">
      <div class="section-header">
        <div class="section-label">Latest</div>
        <h2 class="section-title">Actualités</h2>
      </div>
      <div class="news-scroll-container">
        <div class="news-grid" id="news-grid">
          <!-- Chargement dynamique depuis Google Sheets -->
        </div>
      </div>
      <div class="news-view-more">
        <a href="/news.html" class="btn-view-more">View More</a>
      </div>
    </div>
  </section>

  <!-- PORTFOLIO RARE DESIGN STYLE -->
  <section id="portfolio" class="section" style="background:var(--black);">
    <div class="section-inner">
      <div class="section-header">
        <div class="section-label">Nos Créations</div>
        <h2 class="section-title">Projets</h2>
        <p class="section-desc">Une sélection de nos projets — chaque design, une identité unique construite avec le club.</p>
      </div>
      <div class="portfolio-preview" id="portfolio-preview">
        <!-- Chargement dynamique depuis Google Sheets -->
      </div>
      <a href="/portfolio.html" class="btn-view-all">Voir tout</a>
    </div>
  </section>

   <!-- COMMENT ÇA MARCHE -->
<section id="process" class="section">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-label">Notre process</div>
      <h2 class="section-title">VOTRE COLLECTION EN 5 ÉTAPES</h2>
    </div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;margin-top:2rem;max-width:1200px;margin-left:auto;margin-right:auto;">
      <div style="text-align:center;padding:1.5rem;">
        <div style="font-family:'Oswald',sans-serif;font-size:2.5rem;color:var(--red);font-weight:700;">01</div>
        <h3 style="font-family:'Oswald',sans-serif;font-size:1.1rem;color:var(--white);margin:.8rem 0 .5rem;text-transform:uppercase;">Échange</h3>
        <p style="font-size:.9rem;color:var(--grey-600);line-height:1.5;">Une visio de 30 min pour comprendre votre club, vos besoins et vos envies.</p>
      </div>
      <div style="text-align:center;padding:1.5rem;">
        <div style="font-family:'Oswald',sans-serif;font-size:2.5rem;color:var(--red);font-weight:700;">02</div>
        <h3 style="font-family:'Oswald',sans-serif;font-size:1.1rem;color:var(--white);margin:.8rem 0 .5rem;text-transform:uppercase;">Maquette</h3>
        <p style="font-size:.9rem;color:var(--grey-600);line-height:1.5;">On crée les designs de votre collection. Vous voyez tout avant de valider.</p>
      </div>
      <div style="text-align:center;padding:1.5rem;">
        <div style="font-family:'Oswald',sans-serif;font-size:2.5rem;color:var(--red);font-weight:700;">03</div>
        <h3 style="font-family:'Oswald',sans-serif;font-size:1.1rem;color:var(--white);margin:.8rem 0 .5rem;text-transform:uppercase;">Validation</h3>
        <p style="font-size:.9rem;color:var(--grey-600);line-height:1.5;">Allers-retours jusqu'à ce que chaque détail soit parfait.</p>
      </div>
      <div style="text-align:center;padding:1.5rem;">
        <div style="font-family:'Oswald',sans-serif;font-size:2.5rem;color:var(--red);font-weight:700;">04</div>
        <h3 style="font-family:'Oswald',sans-serif;font-size:1.1rem;color:var(--white);margin:.8rem 0 .5rem;text-transform:uppercase;">Production</h3>
        <p style="font-size:.9rem;color:var(--grey-600);line-height:1.5;">Vos pièces sont fabriquées avec soin. On vous tient informé à chaque étape.</p>
      </div>
      <div style="text-align:center;padding:1.5rem;">
        <div style="font-family:'Oswald',sans-serif;font-size:2.5rem;color:var(--red);font-weight:700;">05</div>
        <h3 style="font-family:'Oswald',sans-serif;font-size:1.1rem;color:var(--white);margin:.8rem 0 .5rem;text-transform:uppercase;">Livraison</h3>
        <p style="font-size:.9rem;color:var(--grey-600);line-height:1.5;">Votre collection arrive, prête à porter sur le terrain.</p>
      </div>
    </div>
  </div>
</section>
   
  <!-- CONTACT (simple CTA vers Calendly) -->
  <section id="contact" class="section" style="text-align:center;background:var(--black);">
    <div class="section-inner">
      <div class="section-label">Prise de contact</div>
      <h2 class="section-title">Prêt à équiper<br>votre club ?</h2>
      <p class="section-desc" style="margin-left:auto;margin-right:auto;">Un échange rapide par formulaire, ou une visio de 30 minutes pour discuter de votre image et construire votre collection.</p>
      <div style="display:flex;gap:2rem;justify-content:center;align-items:center;flex-wrap:wrap;margin-top:2.5rem;">
        <a href="https://calendly.com/bothequipmnt/30min" target="_blank" class="btn-vision" style="margin-top:0;">Réserver une visio</a>
        <button onclick="openContactModal()" class="btn-vision" style="margin-top:0;">Envoyer un mail</button>
      </div>
    </div>
  </section>

  <!-- PARTNER LOGOS -->
  <section id="partners">
    <div class="partners-inner">
      <p class="partners-title">Both Equipmnt pour :</p>
      <div class="partners-grid" id="partners-grid">
        <!-- Logos dynamiques depuis Google Sheets -->
        <div class="spinner"></div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-inner">
      <div class="footer-logo">
        <img src="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400" alt="BOTH">
      </div>
      <div class="footer-links">
        <a href="#vision">À Propos</a>
        <a href="#actualites">Actualités</a>
        <a href="#portfolio">Projets</a>
        <a href="#contact">Contact</a>
        <a href="https://www.instagram.com/bothequipmnt" target="_blank">Instagram</a>
      </div>
    </div>
    <div class="footer-bottom">
      <span>© 2025 Both Equipmnt. Tous droits réservés.</span>
      <span>Paris, France</span>
    </div>
  </footer>
</div>

<!-- ========== LOGIN (inchangé) ========== -->
<div id="login-screen">
  <div class="login-box">
    <div class="login-box-logo">
      <img src="https://bothequipmnt.com/cdn/shop/files/Plan_de_travail_14.png?v=1762357332&width=400" alt="BOTH">
    </div>
    <h2>Le Vestiaire</h2>
    <p>Entrez l'email associé à votre club pour accéder à votre espace.</p>
    <input type="email" class="login-input" id="login-email" placeholder="votre@club.com" onkeydown="if(event.key==='Enter')loginClub()">
    <div class="login-error" id="login-error"></div>
    <button class="btn-login" id="btn-login" onclick="loginClub()">Accéder au Vestiaire</button>
    <button class="login-back" onclick="closeLogin()">← Retour au studio</button>
  </div>
</div>

<!-- ========== LE VESTIAIRE (portal inchangé) ========== -->
<div id="vestiaire">
  <div class="v-nav">
    <div class="v-nav-left">
      <div class="v-nav-logo">
        <img src="https://i.imgur.com/e68bB0X.png" alt="BOTH">
      </div>
      <div class="v-nav-club-wrapper">
        <img id="v-club-logo" class="v-club-logo" src="" alt="" style="display:none;">
        <div class="v-nav-club" id="v-club-name">—</div>
      </div>
    </div>
    <div class="v-nav-right">
      <button class="v-tab active" data-tab="catalogue" onclick="switchTab('catalogue')">Catalogue</button>
      <button class="v-tab" data-tab="commandes" onclick="switchTab('commandes')">Mes Commandes</button>
      <button class="v-btn-cart" onclick="toggleCart()">
        Panier
        <div class="cart-badge" id="cart-badge">0</div>
      </button>
      <button class="v-btn-quit" onclick="closePortal()">Quitter</button>
    </div>
  </div>

  <div class="v-section active" id="section-catalogue">
    <div class="v-section-inner">
      <div class="cat-header">
        <h2>Catalogue</h2>
        <div class="cat-filters" id="cat-filters">
          <button class="cat-filter-btn active" onclick="filterProducts(this,'tous')">Tous</button>
        </div>
      </div>
      <div class="product-grid" id="product-grid"><div class="spinner"></div></div>
    </div>
  </div>

  <div class="v-section" id="section-commandes">
    <div class="v-section-inner">
      <div class="dash-header">
        <h2>Mes Commandes</h2>
        <p>Suivi en temps réel de vos commandes passées.</p>
      </div>
      <div id="orders-wrap"><div class="spinner"></div></div>
    </div>
  </div>
</div>

<!-- ========== PRODUCT MODAL (style Ralawise) ========== -->
<div class="modal-backdrop" id="modal-backdrop" onclick="modalClickOut(event)">
  <div class="modal" id="product-modal">
    <button class="modal-close" onclick="closeModal()">✕</button>
    <div class="modal-img" id="modal-img"></div>
    <div class="modal-body">
      <h3 id="modal-name"></h3>
      <div class="modal-desc" id="modal-desc"></div>
      <div id="modal-table-wrap"></div>
      <div class="modal-footer">
        <div class="modal-footer-info">
          <span>Articles : <strong id="modal-total-qty">0</strong></span>
          <span>Total : <strong id="modal-total-price">0,00 €</strong></span>
        </div>
        <button class="btn-add-cart" id="btn-add-cart" onclick="addToCart()" disabled>Ajouter au panier</button>
      </div>
    </div>
  </div>
</div>

<!-- ========== CART DRAWER (inchangé) ========== -->
<div id="cart-backdrop" onclick="toggleCart()"></div>
<div id="cart-drawer">
  <div class="cart-head">
    <h3>Panier</h3>
    <button class="cart-close-btn" onclick="toggleCart()">✕</button>
  </div>
  <div class="cart-items-wrap" id="cart-items-wrap">
    <div class="cart-empty-msg">Votre panier est vide.</div>
  </div>
  <div class="cart-foot">
    <div class="cart-total-row"><span>Total</span><span id="cart-total">0,00 €</span></div>
    <div class="cart-min-warn" id="cart-min-warn">⚠ Minimum de commande non atteint. Il vous manque encore <strong id="min-rest">0,00 €</strong>.</div>
    <button class="btn-validate" id="btn-validate" onclick="validateOrder()">Valider la commande</button>
  </div>
</div>

<!-- ========== TOAST ========== -->
<div id="toast"></div>

<!-- ========== PAGE DE CONFIRMATION COMMANDE ========== -->
<div id="order-confirmation">
  <div class="confirmation-overlay" onclick="closeConfirmation()"></div>
  <div class="confirmation-modal">
    <button class="confirmation-close" onclick="closeConfirmation()">✕</button>
    
    <div class="confirmation-header">
      <div class="confirmation-icon">✓</div>
      <h2>Commande validée !</h2>
      <p>Votre commande a été enregistrée avec succès.</p>
    </div>
    
    <div class="confirmation-body">
      <div class="confirmation-section">
        <h3>Récapitulatif</h3>
        <div id="confirmation-recap"></div>
      </div>
      
      <div class="confirmation-section rib-section">
        <h3>Coordonnées bancaires pour le virement</h3>
        <p class="rib-instruction">Veuillez effectuer votre virement sur le compte suivant avec la référence de votre commande :</p>
        
        <div class="rib-info">
          <div class="rib-row">
            <span class="rib-label">Bénéficiaire</span>
            <span class="rib-value" id="rib-beneficiaire">BOTH EQUIPMNT</span>
          </div>
          <div class="rib-row">
            <span class="rib-label">IBAN</span>
            <span class="rib-value rib-copyable" id="rib-iban" onclick="copyToClipboard('rib-iban')">
              FR76 1451 8292 6705 3640 9504 091
              <span class="copy-icon">📋</span>
            </span>
          </div>
          <div class="rib-row">
            <span class="rib-label">BIC</span>
            <span class="rib-value rib-copyable" id="rib-bic" onclick="copyToClipboard('rib-bic')">
              FTNOFRP1XXX
              <span class="copy-icon">📋</span>
            </span>
          </div>
          <div class="rib-row">
            <span class="rib-label">Référence</span>
            <span class="rib-value rib-copyable rib-reference" id="order-reference" onclick="copyToClipboard('order-reference')">
              <span class="copy-icon">📋</span>
            </span>
          </div>
        </div>
        
        <div class="rib-note">
          💡 Cliquez sur les valeurs pour les copier
        </div>
      </div>
    </div>
    
    <div class="confirmation-footer">
      <button class="btn-confirmation-close" onclick="closeConfirmation()">Fermer</button>
    </div>
  </div>
</div>

<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
// ============================================================
// ⚙️  CONFIG
// ============================================================
const API = "/.netlify/functions/airtable-api";
const NOTION_API = "/.netlify/functions/notion-api";

// ============================================================
// STATE
// ============================================================
const S = {
  club: null,
  products: [],
  cart: [],
  orders: [],
  currentProduct: null,
  qty: 1,
  news: [],
  portfolio: [],
  partners: []
};

// ============================================================
// UTILS
// ============================================== ==============
function toast(msg, dur=2800){
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), dur);
}
function fmt(n){ return n.toFixed(2).replace('.', ',') + ' €'; }
window.addEventListener('scroll', () => {
  const nav = document.getElementById('main-nav');
  nav.classList.toggle('scrolled', window.scrollY > 80);
});
window.addEventListener('load', () => {
  setTimeout(() => document.getElementById('loader').classList.add('out'), 1100);
  // Charger le contenu dynamique
  loadNews();
  loadPortfolio();
  loadPartners();
});
function scrollTop(){ window.scrollTo({ top:0, behavior:'smooth' }); }

// ============================================================
// API CALLS
// ============================================================
async function apiGet(action, params = {}) {
  const url = API + '?' + new URLSearchParams({ action, ...params });
  const res = await fetch(url);
  if (!res.ok) throw new Error('Erreur réseau ' + res.status);
  return await res.json();
}

async function apiPost(action, body = {}) {
  const res = await fetch(API, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action, ...body })
  });
  if (!res.ok) throw new Error('Erreur réseau ' + res.status);
  return await res.json();
}

// ============================================================
// PUBLIC CONTENT — News, Portfolio, Partners
// ============================================================
async function loadNews(){
  const grid = document.getElementById('news-grid');
  try {
    const res = await fetch(NOTION_API + '?action=getNews');
    const data = await res.json();
    S.news = data.news || [];
    
    if(!S.news.length){
      grid.innerHTML = '<p style="color:var(--grey-400);text-align:center;padding:3rem;">Aucune actualité pour le moment.</p>';
      return;
    }
    
    // Afficher toutes les actualités en scroll horizontal
    grid.innerHTML = S.news.map(n => `
      <div class="news-card" onclick="window.location='${n.lien_externe || '/actualite-detail.html?id=' + n.id}'">
        <div class="news-card-img">
          ${n.image ? `<img src="${n.image}" alt="${n.titre}" loading="lazy">` : ''}
        </div>
        <div class="news-date">${n.date}</div>
        <div class="news-title">${n.titre}</div>
        <p class="news-excerpt">${n.texte_court || ''}</p>
      </div>
    `).join('');
    
  } catch(e){
    console.error(e);
    grid.innerHTML = '<p style="color:var(--grey-400);text-align:center;">Chargement des actualités...</p>';
  }
}

async function loadPortfolio(){
  const grid = document.getElementById('portfolio-preview');
  try {
    const res = await fetch(NOTION_API + '?action=getPortfolio');
    const data = await res.json();
    S.portfolio = data.projects || [];
    
    // On prend les 4 premiers (déjà filtrés "mis en avant" par la function)
    const featured = S.portfolio.slice(0, 4);
    
    if(!featured.length){
      grid.innerHTML = '<p style="color:var(--grey-400);grid-column:1/-1;text-align:center;padding:3rem;">Projets en construction.</p>';
      return;
    }
    
    grid.innerHTML = featured.map(p => `
      <div class="port-item" onclick="window.location='/projet-detail.html?id=${p.id}'" style="cursor:pointer;">
        ${p.image ? `<img src="${p.image}" class="port-item-img" alt="${p.nom}">` : ''}
        <div class="port-item-overlay">
          <div class="port-item-name">${p.nom}</div>
        </div>
      </div>
    `).join('');
    
  } catch(e){
    console.error(e);
    grid.innerHTML = '<p style="color:var(--grey-400);grid-column:1/-1;text-align:center;">Chargement du portfolio...</p>';
  }
}

async function loadPartners(){
  const grid = document.getElementById('partners-grid');
  try {
    const res = await fetch(NOTION_API + '?action=getPartners');
    const data = await res.json();
    S.partners = data.partners || [];
    
    if(!S.partners.length){
      grid.innerHTML = '<p style="color:var(--grey-400);">Logos en cours d\'ajout.</p>';
      return;
    }
    
    grid.innerHTML = S.partners.map(p => `
      <img src="${p.logo}" alt="${p.nom}" class="partner-logo">
    `).join('');
    
  } catch(e){
    console.error(e);
    grid.innerHTML = '';
  }
}

// ============================================================
// AUTH (inchangé)
// ============================================================
function openLogin(){
  document.getElementById('login-screen').classList.add('active');
  document.getElementById('login-email').focus();
}
function closeLogin(){
  document.getElementById('login-screen').classList.remove('active');
  document.getElementById('login-error').textContent = '';
}

async function loginClub(){
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  const errEl = document.getElementById('login-error');
  const btn = document.getElementById('btn-login');
  errEl.textContent = '';

  if (!email) { errEl.textContent = 'Veuillez entrer un email.'; return; }

  btn.disabled = true;
  btn.textContent = 'Vérification...';

  try {
    const res = await apiGet('getClub', { email });

    if (!res.club) {
      errEl.textContent = 'Aucun club trouvé avec cet email. Contactez-nous.';
      btn.disabled = false;
      btn.textContent = 'Accéder au Vestiaire';
      return;
    }

    S.club = res.club;
    btn.disabled = false;
    btn.textContent = 'Accéder au Vestiaire';
    closeLogin();
    openPortal();

  } catch (e) {
    console.error(e);
    errEl.textContent = 'Erreur de connexion. Réessayez dans un instant.';
    btn.disabled = false;
    btn.textContent = 'Accéder au Vestiaire';
  }
}

// ============================================================
// PORTAL (code inchangé de la v1)
// ============================================================
async function openPortal(){
  document.getElementById('vestiaire').classList.add('active');
  document.getElementById('v-club-name').textContent = S.club.nom;
  
  // Afficher le logo du club si disponible
  const logoEl = document.getElementById('v-club-logo');
  if (S.club.logoClub && S.club.logoClub.trim()) {
    logoEl.src = S.club.logoClub;
    logoEl.alt = S.club.nom;
    logoEl.style.display = 'block';
  } else {
    logoEl.style.display = 'none';
  }
  
  await loadCatalogue();
}

function closePortal(){
  document.getElementById('vestiaire').classList.remove('active');
  S.club = null;
  S.cart = [];
  updateCartUI();
}

async function loadCatalogue(){
  const grid = document.getElementById('product-grid');
  grid.innerHTML = '<div class="spinner"></div>';

  try {
    const res = await apiGet('getCatalogue', { clubId: S.club.id, clubNom: S.club.nom });
    S.products = res.products || [];

    const cats = [...new Set(S.products.map(p => p.categorie).filter(Boolean))];
    const filtersEl = document.getElementById('cat-filters');
    filtersEl.innerHTML =
      '<button class="cat-filter-btn active" onclick="filterProducts(this,\'tous\')">Tous</button>'
      + cats.map(c => `<button class="cat-filter-btn" onclick="filterProducts(this,'${c}')">${c}</button>`).join('');

    renderProducts(S.products);

  } catch (e) {
    console.error(e);
    grid.innerHTML = '<p style="color:var(--red);padding:2rem;">Erreur lors du chargement du catalogue.</p>';
  }
}

function renderProducts(list){
  const grid = document.getElementById('product-grid');
  if (!list.length) {
    grid.innerHTML = '<p style="color:var(--grey-400);padding:2rem;font-style:italic;">Aucun produit trouvé dans cette catégorie.</p>';
    return;
  }
  
  // Grouper les produits par catégorie
  const grouped = {};
  list.forEach(p => {
    const cat = p.categorie || 'Sans catégorie';
    if (!grouped[cat]) grouped[cat] = [];
    grouped[cat].push(p);
  });
  
  // Afficher par catégorie
  let html = '';
  Object.keys(grouped).forEach(cat => {
    html += `
      <div class="category-section">
        <h3 class="category-title">${cat}</h3>
      </div>
    `;
    
    grouped[cat].forEach(p => {
      const minQty = p.minQuantite || 0;
      const minTag = minQty > 1 ? `<div class="product-card-tag">Min. ${minQty} pcs</div>` : '';
      
      html += `
        <div class="product-card" onclick="openModal('${p.id}')">
          <div class="product-card-img">
            ${p.image ? `<img src="${Array.isArray(p.image) ? p.image[0] : p.image.split(',')[0].trim()}" alt="${p.nom}" loading="lazy">` : ''}
            ${minTag}
          </div>
          <div class="product-card-name">${p.nom}</div>
          <div class="product-card-price">${fmt(p.prix)}</div>
        </div>
      `;
    });
  });
  
  grid.innerHTML = html;
}

function filterProducts(btn, cat){
  document.querySelectorAll('.cat-filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderProducts(cat === 'tous' ? S.products : S.products.filter(p => p.categorie === cat));
}

function openModal(id){
  const p = S.products.find(x => x.id === id);
  if (!p) return;
  S.currentProduct = p;
  S.persoData = {}; // { taille: [{nom:'', num:''}, ...] }

  // Image (carrousel ou simple)
  const modalImg = document.getElementById('modal-img');
  if (p.image) {
    const images = Array.isArray(p.image) ? p.image : p.image.split(',').map(url => url.trim()).filter(url => url);
    if (images.length === 1) {
      modalImg.innerHTML = `<img src="${images[0]}" alt="${p.nom}">`;
    } else {
      modalImg.innerHTML = `
        <div class="product-carousel">
          <div class="carousel-images" id="carousel-images">
            ${images.map(url => `<img src="${url}" alt="${p.nom}">`).join('')}
          </div>
          <button class="carousel-arrow carousel-arrow-left" onclick="changeCarouselImage(-1)">‹</button>
          <button class="carousel-arrow carousel-arrow-right" onclick="changeCarouselImage(1)">›</button>
          <div class="carousel-dots" id="carousel-dots">
            ${images.map((_, i) => `<div class="carousel-dot ${i === 0 ? 'active' : ''}" onclick="goToCarouselImage(${i})"></div>`).join('')}
          </div>
        </div>`;
      S.carouselIndex = 0;
      S.carouselTotal = images.length;
    }
  } else {
    modalImg.innerHTML = '<div style="width:100%;height:100%;background:var(--off);"></div>';
  }

  document.getElementById('modal-name').textContent = p.nom;
  document.getElementById('modal-desc').textContent = p.description || 'Équipement sportif — Studio Both.';

  // Tailles
  const tailles = Array.isArray(p.tailles) ? p.tailles : (p.tailles ? p.tailles.split(',').map(t=>t.trim()) : ['S','M','L','XL']);
  const minQty = p.minQuantite || 1;

  let tableHTML = `<table class="size-table"><thead><tr>
    <th>Taille</th>
    <th>Prix unitaire</th>
    ${p.personnalisable ? '<th>Personnalisation</th>' : ''}
    <th>Qté</th>
  </tr></thead><tbody>`;

  tailles.forEach(t => {
    tableHTML += `<tr>
      <td>${t}</td>
      <td>${fmt(p.prix)}</td>
      ${p.personnalisable ? `<td><button class="perso-btn" id="perso-btn-${t}" onclick="openPerso('${t}')" style="display:none">Personnaliser</button></td>` : ''}
      <td><input type="number" class="qty-input" id="qty-${t}" min="0" value="0" onchange="onQtyChange()" oninput="onQtyChange()"></td>
    </tr>`;
  });

  tableHTML += '</tbody></table>';

  if (minQty > 1) {
    tableHTML += `<div class="modal-min-warn show">⚠️ Commande minimum : ${minQty} pièces au total (toutes tailles confondues)</div>`;
  }

  document.getElementById('modal-table-wrap').innerHTML = tableHTML;
  document.getElementById('modal-total-qty').textContent = '0';
  document.getElementById('modal-total-price').textContent = fmt(0);
  document.getElementById('btn-add-cart').disabled = true;
  document.getElementById('modal-backdrop').classList.add('active');
}

function onQtyChange(){
  const p = S.currentProduct;
  const tailles = Array.isArray(p.tailles) ? p.tailles : (p.tailles ? p.tailles.split(',').map(t=>t.trim()) : ['S','M','L','XL']);
  let totalQty = 0;

  tailles.forEach(t => {
    const input = document.getElementById('qty-' + t);
    const qty = parseInt(input.value) || 0;
    totalQty += qty;

    // Afficher/cacher bouton perso
    if (p.personnalisable) {
      const btn = document.getElementById('perso-btn-' + t);
      if (qty > 0) {
        btn.style.display = 'inline-block';
        // Vérifier si perso déjà remplie
        if (S.persoData[t] && S.persoData[t].length === qty) {
          btn.textContent = '✓ Modif.';
          btn.classList.add('done');
        } else {
          btn.textContent = 'Personnaliser';
          btn.classList.remove('done');
          // Reset si quantité changée
          if (S.persoData[t] && S.persoData[t].length !== qty) {
            delete S.persoData[t];
          }
        }
      } else {
        btn.style.display = 'none';
        delete S.persoData[t];
      }
    }
  });

  const minQty = p.minQuantite || 1;
  document.getElementById('modal-total-qty').textContent = totalQty;
  document.getElementById('modal-total-price').textContent = fmt(totalQty * p.prix);
  document.getElementById('btn-add-cart').disabled = totalQty < minQty;
}

function openPerso(taille){
  const p = S.currentProduct;
  const qty = parseInt(document.getElementById('qty-' + taille).value) || 0;
  if (qty === 0) return;

  const existing = S.persoData[taille] || [];

  let html = `<div class="perso-overlay active" id="perso-overlay" onclick="if(event.target===this)closePerso()">
    <div class="perso-box">
      <button onclick="closePerso()" style="position:absolute;top:.8rem;right:.8rem;width:32px;height:32px;border:none;background:var(--off);border-radius:50%;font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;">✕</button>
      <h4>${p.nom} — Taille ${taille}</h4>
      <p style="font-size:.75rem;color:var(--grey-400);margin-bottom:1rem;">${qty} pièce${qty>1?'s':''} à personnaliser</p>`;

  for (let i = 0; i < qty; i++) {
    const nom = existing[i] ? existing[i].nom : '';
    const num = existing[i] ? existing[i].num : '';
    html += `<div class="perso-row">
      <span>#${i+1}</span>
      <input type="text" placeholder="Nom" maxlength="16" id="perso-nom-${taille}-${i}" value="${nom}">
      <input type="text" placeholder="N°" maxlength="3" id="perso-num-${taille}-${i}" value="${num}">
    </div>`;
  }

  html += `<button class="perso-save" onclick="savePerso('${taille}', ${qty})">Valider</button>
    </div></div>`;

  document.body.insertAdjacentHTML('beforeend', html);
}

function savePerso(taille, qty){
  S.persoData[taille] = [];
  for (let i = 0; i < qty; i++) {
    S.persoData[taille].push({
      nom: document.getElementById('perso-nom-' + taille + '-' + i).value.trim(),
      num: document.getElementById('perso-num-' + taille + '-' + i).value.trim()
    });
  }
  closePerso();
  onQtyChange();
}

function closePerso(){
  const overlay = document.getElementById('perso-overlay');
  if (overlay) overlay.remove();
}

function closeModal(){ document.getElementById('modal-backdrop').classList.remove('active'); }
function modalClickOut(e){ if (e.target === document.getElementById('modal-backdrop')) closeModal(); }

function addToCart(){
  const p = S.currentProduct;
  const tailles = Array.isArray(p.tailles) ? p.tailles : (p.tailles ? p.tailles.split(',').map(t=>t.trim()) : ['S','M','L','XL']);

  tailles.forEach(t => {
    const qty = parseInt(document.getElementById('qty-' + t).value) || 0;
    if (qty === 0) return;

    if (p.personnalisable && S.persoData[t]) {
      // Une ligne panier par pièce personnalisée
      S.persoData[t].forEach(perso => {
        S.cart.push({
          productId: p.id,
          nom: p.nom,
          image: p.image,
          prix: p.prix,
          taille: t,
          nomPerso: perso.nom,
          numPerso: perso.num,
          quantite: 1
        });
      });
    } else {
      // Une seule ligne pour toute la quantité
      S.cart.push({
        productId: p.id,
        nom: p.nom,
        image: p.image,
        prix: p.prix,
        taille: t,
        nomPerso: '',
        numPerso: '',
        quantite: qty
      });
    }
  });

  updateCartUI();
  closeModal();
  const totalAdded = tailles.reduce((s, t) => s + (parseInt(document.getElementById('qty-' + t).value) || 0), 0);
  toast(`${p.nom} — ${totalAdded} article${totalAdded>1?'s':''} ajouté${totalAdded>1?'s':''} ✓`);
}

function removeFromCart(i){
  S.cart.splice(i, 1);
  updateCartUI();
}

   // ============================================================
// CARROUSEL PRODUIT
// ============================================================
function changeCarouselImage(direction) {
  if (!S.carouselTotal || S.carouselTotal <= 1) return;
  
  S.carouselIndex = (S.carouselIndex + direction + S.carouselTotal) % S.carouselTotal;
  updateCarousel();
}

function goToCarouselImage(index) {
  if (!S.carouselTotal || S.carouselTotal <= 1) return;
  
  S.carouselIndex = index;
  updateCarousel();
}

function updateCarousel() {
  const carouselImages = document.getElementById('carousel-images');
  const dots = document.querySelectorAll('.carousel-dot');
  
  if (!carouselImages) return;
  
  carouselImages.style.transform = `translateX(-${S.carouselIndex * 100}%)`;
  
  dots.forEach((dot, i) => {
    dot.classList.toggle('active', i === S.carouselIndex);
  });
}

function updateCartUI(){
  const wrap = document.getElementById('cart-items-wrap');
  const totalArticles = S.cart.reduce((s, i) => s + i.quantite, 0);
  const totalPrix     = S.cart.reduce((s, i) => s + (i.prix * i.quantite), 0);

  const badge = document.getElementById('cart-badge');
  badge.textContent = totalArticles;
  badge.classList.toggle('show', totalArticles > 0);

  document.getElementById('cart-total').textContent = fmt(totalPrix);

  if (!S.cart.length) {
    wrap.innerHTML = '<div class="cart-empty-msg">Votre panier est vide.</div>';
  } else {
    wrap.innerHTML = S.cart.map((item, i) => `
      <div class="cart-item">
        <div class="cart-item-img">
          ${item.image ? `<img src="${Array.isArray(item.image) ? item.image[0] : item.image.split(',')[0].trim()}" alt="${item.nom}">` : '<div style="width:100%;height:100%;background:var(--off);"></div>'}
        </div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.nom}</div>
          <div class="cart-item-meta">
            Taille : ${item.taille}
            ${item.nomPerso ? ` · Nom : ${item.nomPerso}` : ''}
            ${item.numPerso ? ` · N°${item.numPerso}` : ''}
            · Qté : ${item.quantite}
          </div>
        </div>
        <div class="cart-item-right">
          <div class="cart-item-price">${fmt(item.prix * item.quantite)}</div>
          <button class="btn-remove" onclick="removeFromCart(${i})">Supprimer</button>
        </div>
      </div>
    `).join('');
  }

  const warnEl = document.getElementById('cart-min-warn');
  const btnVal = document.getElementById('btn-validate');

  if (S.club && S.club.activeMin) {
    const min = parseFloat(S.club.minCommande) || 0;
    if (totalPrix < min) {
      warnEl.classList.add('show');
      document.getElementById('min-rest').textContent = fmt(min - totalPrix);
      btnVal.disabled = true;
    } else {
      warnEl.classList.remove('show');
      btnVal.disabled = (totalArticles === 0);
    }
  } else {
    warnEl.classList.remove('show');
    btnVal.disabled = (totalArticles === 0);
  }
}

function toggleCart(){
  document.getElementById('cart-drawer').classList.toggle('open');
  document.getElementById('cart-backdrop').classList.toggle('active');
}

async function validateOrder(){
  if (!S.cart.length) return;

  const btn = document.getElementById('btn-validate');
  btn.disabled = true;
  btn.textContent = 'Envoi en cours...';

  try {
    const res = await apiPost('createOrder', {
      clubId:   S.club.id,
      clubNom:  S.club.nom,
      lignes:   S.cart.map(item => ({
        productId: item.productId,
        nom:       item.nom,
        prix:      item.prix,
        taille:    item.taille,
        nomPerso:  item.nomPerso || '',
        numPerso:  item.numPerso || '',
        quantite:  item.quantite
      })),
      total: S.cart.reduce((s, i) => s + (i.prix * i.quantite), 0)
    });

    if (res.success) {
      const orderRef = res.orderRef || 'CMD-' + Date.now();
      const total = S.cart.reduce((s, i) => s + (i.prix * i.quantite), 0);
      
      // Afficher la page de confirmation
      showOrderConfirmation(orderRef, S.cart, total);
      
      // Vider le panier
      S.cart = [];
      updateCartUI();
      toggleCart();
      
      // Recharger les commandes si on est sur l'onglet commandes
      if (document.getElementById('section-commandes').classList.contains('active')) loadOrders();
    } else {
      toast('Erreur lors de l\'envoi. Réessayez.');
    }

  } catch (e) {
    console.error(e);
    toast('Erreur réseau. Réessayez dans un instant.');
  }

  btn.disabled = false;
  btn.textContent = 'Valider la commande';
}

function showOrderConfirmation(orderRef, cart, total) {
  // Afficher la modal
  const modal = document.getElementById('order-confirmation');
  modal.classList.add('active');
  
  // Remplir la référence
  document.getElementById('order-reference').textContent = orderRef;
  
  // Remplir le récap
  const recap = document.getElementById('confirmation-recap');
  recap.innerHTML = `
    <p><strong>Référence :</strong> ${orderRef}</p>
    <p><strong>Club :</strong> ${S.club.nom}</p>
    <p><strong>Nombre d'articles :</strong> ${cart.reduce((s, i) => s + i.quantite, 0)}</p>
    <p><strong>Montant total :</strong> ${fmt(total)}</p>
    <br>
    <p style="font-size:0.85rem;color:var(--grey-400);">Détails :</p>
    ${cart.map(item => `
      <p style="font-size:0.85rem;margin-top:0.5rem;">
        • ${item.nom} ${item.taille ? '(' + item.taille + ')' : ''} 
        ${item.nomPerso ? '- ' + item.nomPerso : ''} 
        ${item.numPerso ? '#' + item.numPerso : ''} 
        × ${item.quantite}
      </p>
    `).join('')}
  `;
}

function closeConfirmation() {
  document.getElementById('order-confirmation').classList.remove('active');
}

function copyToClipboard(elementId) {
  const element = document.getElementById(elementId);
  const text = element.textContent.trim().replace('📋', '').trim();
  
  navigator.clipboard.writeText(text).then(() => {
    toast('✓ Copié dans le presse-papier');
  }).catch(() => {
    toast('Erreur de copie. Copiez manuellement.');
  });
}

async function loadOrders(){
  const wrap = document.getElementById('orders-wrap');
  wrap.innerHTML = '<div class="spinner"></div>';

  try {
    const res = await apiGet('getOrders', { clubId: S.club.id });
    S.orders = res.orders || [];

    if (!S.orders.length) {
      wrap.innerHTML = '<p style="color:var(--grey-400);padding:2rem;font-style:italic;">Aucune commande pour le moment.</p>';
      return;
    }

    const badgeClass = s => {
      if (s.includes('ATTENTE'))    return 'badge-pending';
      if (s.includes('PRODUCTION')) return 'badge-production';
      if (s.includes('LIVRÉE') || s.includes('LIVREE') || s.includes('LIVRÉ')) return 'badge-delivered';
      if (s.includes('ANNULÉE') || s.includes('ANNULEE')) return 'badge-cancelled';
      return 'badge-pending';
    };

    wrap.innerHTML = `
      <table class="orders-table">
        <thead><tr>
          <th>Réf.</th>
          <th>Date</th>
          <th>Articles</th>
          <th>Total</th>
          <th>Statut</th>
        </tr></thead>
        <tbody>
          ${S.orders.map(o => `
            <tr>
              <td>${o.ref || '—'}</td>
              <td>${o.date || '—'}</td>
              <td>${o.nbArticles || '—'}</td>
              <td>${fmt(parseFloat(o.total) || 0)}</td>
              <td><span class="badge ${badgeClass(o.statut)}">${o.statut || '—'}</span></td>
            </tr>
          `).join('')}
        </tbody>
      </table>`;

  } catch (e) {
    console.error(e);
    wrap.innerHTML = '<p style="color:var(--red);padding:2rem;">Erreur lors du chargement des commandes.</p>';
  }
}

function switchTab(tab){
  document.querySelectorAll('.v-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.v-section').forEach(s => s.classList.remove('active'));
  document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
  document.getElementById(`section-${tab}`).classList.add('active');
  if (tab === 'commandes') loadOrders();
}
</script>

  <!-- Modal Contact -->
  <div id="contact-modal-backdrop" class="modal-backdrop" onclick="closeContactModal(event)">
    <div class="modal-box" style="max-width:600px;">
      <button class="modal-close" onclick="closeContactModal()">&times;</button>
      <h3 style="font-family:var(--display);font-size:1.4rem;margin-bottom:2rem;text-transform:uppercase;text-align:center;line-height:1.3;color:var(--black);">PRÊT À DONNER UNE NOUVELLE IMAGE À VOTRE CLUB ?</h3>
      <form id="contact-form" name="contact" method="POST" data-netlify="true" onsubmit="submitContactForm(event)" style="display:flex;flex-direction:column;gap:1.2rem;">
        <div class="field">
          <label>Nom *</label>
          <input type="text" id="contact-nom" name="nom" required>
        </div>
        <div class="field">
          <label>Email *</label>
          <input type="email" id="contact-email" name="email" required>
        </div>
        <div class="field">
          <label>Nom du club *</label>
          <input type="text" id="contact-club" name="club" required>
        </div>
        <div class="field">
          <label>Message *</label>
          <textarea id="contact-message" name="message" required></textarea>
        </div>
        <button type="submit" class="btn-add-cart">Envoyer</button>
      </form>
    </div>
  </div>

  <script>
    function openContactModal() {
      document.getElementById('contact-modal-backdrop').classList.add('active');
    }
    
    function closeContactModal(e) {
      if (!e || e.target === document.getElementById('contact-modal-backdrop')) {
        document.getElementById('contact-modal-backdrop').classList.remove('active');
      }
    }
    
    function submitContactForm(e) {
  e.preventDefault();
  const form = document.getElementById('contact-form');
  const formData = new FormData(form);
  
  fetch('/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams(formData).toString()
  })
  .then(() => {
    closeContactModal();
    form.reset();
    toast('✓ Message envoyé ! Nous vous répondrons rapidement.');
  })
  .catch(() => {
    toast('Erreur lors de l\'envoi. Réessayez.');
  });
}
  </script>

</body>
</html>
